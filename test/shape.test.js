import test from 'node:test';
import compare from './compare.js';

test('empty shape argument', async () => {
  await compare(
    `clip-path: @shape();`,
    `clip-path: polygon();`
  );
});

test('primitive shape', async () => {
  await compare(
    `clip-path: @shape(star);`,
    `clip-path: polygon(97.07729755661009% 34.70365877844011%,20.904630011522578% 90.0463412215599%,50% 0.500000000000006%,79.09536998847742% 90.0463412215599%,2.922702443389902% 34.703658778440094%,97.07729755661009% 34.70365877844011%,20.904630011522574% 90.0463412215599%,50.000000000000014% 0.500000000000006%,79.09536998847742% 90.0463412215599%,2.922702443389902% 34.70365877844009%);`
  );
});

test('primitive shape extra argumnets', async () => {
  await compare(
    `clip-path: @shape(clover, 4);`,
    `clip-path: polygon(99% 50%,98.91607913836279% 48.71908738821069%,98.66478794606793% 47.44958653446647%,98.24753772620471% 46.20283643086252%,97.66667108575395% 44.9900309878713%,96.92544765018488% 43.822147616446564%,96.0280241871959% 42.709877149866756%,94.97942926199214% 41.66355553901687%,93.78553258016444% 40.69309774386951%,92.45300920694383% 39.807934230380184%,90.98929888315259% 39.01695046594135%,89.40256068836024% 38.32842978804535%,87.70162333039686% 37.75%,85.89593136729911% 37.28858402455213%,83.99548769280034% 36.950354921244845%,82.01079263947122% 36.74069554641817%,79.95278007442994% 36.66416310612585%,77.83275088104126% 36.72445882206016%,75.66230423610068% 36.92440289903802%,73.45326710555035% 37.26591494989877%,71.21762239271877% 37.75%,68.96743618134306% 38.37674015907911%,66.71478452117724% 39.14529201328729%,64.4716802067697% 40.053889754915325%,62.25000000000001% 41.09985403193433%,60.06141274419057% 42.279606464187125%,57.9173088120769% 43.588689738106%,55.82873132166001% 45.02179315741424%,53.80630954303057% 46.572783493605804%,51.86019490571155% 48.23474094729621%,50% 50%,48.234740947296224% 51.860194905711545%,46.57278349360582% 53.806309543030565%,45.021793157414244% 55.82873132166001%,43.58868973810601% 57.91730881207688%,42.27960646418714% 60.061412744190555%,41.099854031934335% 62.24999999999999%,40.05388975491533% 64.47168020676969%,39.14529201328729% 66.71478452117722%,38.37674015907911% 68.96743618134306%,37.75000000000001% 71.21762239271874%,37.26591494989878% 73.45326710555034%,36.92440289903802% 75.66230423610067%,36.72445882206016% 77.83275088104126%,36.66416310612585% 79.95278007442992%,36.74069554641817% 82.01079263947122%,36.950354921244845% 83.99548769280034%,37.28858402455212% 85.8959313672991%,37.75% 87.70162333039686%,38.32842978804534% 89.40256068836023%,39.016950465941335% 90.98929888315257%,39.807934230380184% 92.45300920694383%,40.69309774386951% 93.78553258016444%,41.663555539016855% 94.97942926199214%,42.709877149866756% 96.0280241871959%,43.82214761644656% 96.92544765018486%,44.990030987871286% 97.66667108575395%,46.20283643086252% 98.24753772620471%,47.44958653446646% 98.66478794606793%,48.71908738821068% 98.91607913836279%,49.99999999999999% 99%,51.2809126117893% 98.91607913836279%,52.550413465533516% 98.66478794606795%,53.797163569137474% 98.24753772620471%,55.00996901212869% 97.66667108575396%,56.17785238355343% 96.92544765018489%,57.290122850133244% 96.0280241871959%,58.33644446098313% 94.97942926199215%,59.30690225613048% 93.78553258016447%,60.192065769619816% 92.45300920694383%,60.98304953405865% 90.98929888315259%,61.67157021195465% 89.40256068836024%,62.24999999999999% 87.70162333039686%,62.71141597544787% 85.89593136729913%,63.04964507875515% 83.99548769280035%,63.259304453581834% 82.01079263947123%,63.33583689387415% 79.95278007442994%,63.27554117793986% 77.83275088104129%,63.07559710096198% 75.66230423610068%,62.73408505010123% 73.4532671055504%,62.25000000000001% 71.21762239271877%,61.62325984092089% 68.96743618134306%,60.85470798671272% 66.71478452117728%,59.94611024508468% 64.47168020676972%,58.90014596806567% 62.25000000000001%,57.72039353581289% 60.06141274419059%,56.41131026189401% 57.917308812076904%,54.97820684258576% 55.828731321660015%,53.4272165063942% 53.80630954303059%,51.765259052703804% 51.860194905711566%,50.000000000000014% 50.000000000000014%,48.13980509428848% 48.23474094729624%,46.19369045696945% 46.572783493605826%,44.17126867834% 45.021793157414244%,42.08269118792314% 43.58868973810603%,39.93858725580945% 42.27960646418714%,37.750000000000014% 41.099854031934335%,35.52831979323033% 40.05388975491534%,33.285215478822785% 39.145292013287296%,31.032563818656943% 38.37674015907911%,28.782377607281283% 37.75000000000001%,26.546732894449672% 37.26591494989878%,24.33769576389934% 36.92440289903802%,22.167249118958765% 36.72445882206016%,20.047219925570094% 36.66416310612585%,17.989207360528788% 36.74069554641817%,16.004512307199693% 36.950354921244845%,14.1040686327009% 37.28858402455212%,12.298376669603151% 37.74999999999999%,10.597439311639794% 38.32842978804534%,9.01070111684743% 39.016950465941335%,7.546990793056168% 39.807934230380184%,6.214467419835573% 40.6930977438695%,5.0205707380078675% 41.663555539016855%,3.9719758128041183% 42.709877149866756%,3.0745523498151295% 43.82214761644655%,2.3333289142460467% 44.990030987871286%,1.752462273795291% 46.20283643086252%,1.3352120539320667% 47.44958653446645%,1.083920861637211% 48.71908738821068%,1.0000000000000009% 49.99999999999999%,1.0839208616372054% 51.28091261178929%,1.335212053932061% 52.550413465533516%,1.7524622737952855% 53.797163569137474%,2.33332891424603% 55.00996901212868%,3.0745523498151073% 56.17785238355343%,3.971975812804107% 57.29012285013323%,5.020570738007835% 58.33644446098312%,6.21446741983554% 59.30690225613048%,7.5469907930561515% 60.192065769619816%,9.010701116847391% 60.983049534058644%,10.59743931163975% 61.67157021195465%,12.29837666960314% 62.24999999999999%,14.10406863270085% 62.71141597544787%,16.004512307199644% 63.04964507875515%,17.989207360528763% 63.259304453581834%,20.04721992557003% 63.33583689387415%,22.167249118958704% 63.27554117793986%,24.33769576389932% 63.07559710096198%,26.546732894449608% 62.73408505010123%,28.78237760728123% 62.25000000000001%,31.032563818656932% 61.623259840920895%,33.28521547882273% 60.85470798671273%,35.528319793230274% 59.94611024508468%,37.749999999999986% 58.90014596806567%,39.9385872558094% 57.72039353581289%,42.08269118792308% 56.41131026189401%,44.17126867833998% 54.97820684258576%,46.1936904569694% 53.42721650639422%,48.13980509428843% 51.765259052703804%,49.999999999999986% 50.000000000000014%,51.76525905270376% 48.139805094288484%,53.427216506394174% 46.193690456969456%,54.97820684258572% 44.171268678340034%,56.411310261893966% 42.082691187923146%,57.72039353581285% 39.938587255809466%,58.900145968065665% 37.750000000000014%,59.94611024508467% 35.5283197932303%,60.85470798671268% 33.285215478822835%,61.62325984092087% 31.032563818657%,62.24999999999999% 28.78237760728129%,62.73408505010122% 26.546732894449676%,63.07559710096198% 24.33769576389934%,63.27554117793984% 22.167249118958736%,63.335836893874166% 20.047219925570133%,63.259304453581834% 17.989207360528823%,63.049645078755155% 16.004512307199697%,62.71141597544787% 14.1040686327009%,62.25000000000001% 12.298376669603156%,61.67157021195465% 10.597439311639773%,60.98304953405867% 9.010701116847454%,60.19206576961984% 7.546990793056196%,59.3069022561305% 6.214467419835573%,58.33644446098315% 5.0205707380078675%,57.290122850133244% 3.971975812804124%,56.17785238355344% 3.0745523498151184%,55.009969012128735% 2.333328914246058%,53.79716356913751% 1.7524622737952966%,52.55041346553355% 1.3352120539320667%,51.28091261178932% 1.083920861637211%,50.000000000000014% 1.0000000000000009%,48.71908738821069% 1.083920861637211%,47.449586534466505% 1.3352120539320556%,46.20283643086255% 1.7524622737952744%,44.99003098787132% 2.33332891424603%,43.82214761644658% 3.0745523498151073%,42.70987714986677% 3.971975812804107%,41.66355553901687% 5.0205707380078515%,40.693097743869544% 6.214467419835512%,39.807934230380205% 7.54699079305613%,39.016950465941356% 9.010701116847386%,38.328429788045355% 10.59743931163975%,37.75000000000001% 12.298376669603133%,37.28858402455213% 14.104068632700884%,36.95035492124485% 16.004512307199597%,36.74069554641818% 17.989207360528724%,36.66416310612585% 20.04721992557003%,36.72445882206016% 22.167249118958704%,36.92440289903802% 24.337695763899315%,37.26591494989877% 26.546732894449644%,37.749999999999986% 28.782377607281184%,38.37674015907909% 31.03256381865689%,39.145292013287275% 33.28521547882273%,40.05388975491532% 35.52831979323027%,41.09985403193433% 37.749999999999986%,42.279606464187125% 39.93858725580943%,43.58868973810596% 42.08269118792305%,45.0217931574142% 44.171268678339935%,46.57278349360578% 46.19369045696939%,48.23474094729619% 48.13980509428843%,49.999999999999986% 49.999999999999986%,51.860194905711545% 51.76525905270378%,53.80630954303051% 53.42721650639414%,55.828731321659966% 54.97820684258572%,57.917308812076854% 56.411310261893966%,60.061412744190534% 57.72039353581285%,62.249999999999986% 58.900145968065665%,64.4716802067697% 59.94611024508467%,66.71478452117717% 60.85470798671268%,68.967436181343% 61.62325984092087%,71.21762239271871% 62.249999999999986%,73.45326710555031% 62.73408505010122%,75.66230423610065% 63.07559710096198%,77.83275088104126% 63.27554117793984%,79.95278007442987% 63.33583689387415%,82.01079263947118% 63.259304453581834%,83.9954876928003% 63.049645078755155%,85.8959313672991% 62.711415975447885%,87.70162333039684% 62.25000000000001%,89.40256068836023% 61.67157021195465%,90.98929888315254% 60.98304953405867%,92.45300920694379% 60.19206576961984%,93.78553258016441% 59.30690225613051%,94.97942926199214% 58.33644446098315%,96.02802418719587% 57.29012285013325%,96.92544765018486% 56.17785238355344%,97.66667108575393% 55.009969012128735%,98.2475377262047% 53.79716356913752%,98.66478794606792% 52.550413465533566%,98.91607913836279% 51.28091261178933%);`
  );
});

test('custom shape', async () => {
  await compare(`
    clip-path: @shape(
      points: 5;
      turn: 2;
    );
  `, `clip-path: polygon(100% 50%,9.549150281252633% 20.61073738537634%,65.45084971874736% 97.55282581475768%,65.45084971874738% 2.447174185242323%,9.549150281252617% 79.38926261462365%);`
  );
});
